{# templates/public/home.html #}
{% extends 'admin/base.html' %}
{% block content %}
<a href="{{ url_for('pdf_home') }}" class="btn no-print">Download PDF</a>

<section class="bg-white py-12">
  <div class="max-w-7xl mx-auto px-4 text-center">
    <!-- Title + Sub‐title with accent underline -->
    <h1 class="text-2xl sm:text-5xl font-extrabold text-gray-900">Alabama Basketball</h1>
    <div class="w-24 h-1 bg-[#9E1B32] mx-auto mt-4"></div>
    <p class="mt-4 text-lg text-gray-600">Season Stats & Leaderboards</p>
  </div>

  <!-- Inline Summary Cards -->
  <div class="mt-8 max-w-7xl mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 px-4">
    {% for label, value in [
      ('Season Record',   summary.record),
      ('Avg. BCP/Game',   summary.avg_bcp),
      ('Avg. 3FG%',       summary.avg_fg3),
      ('Avg. Team PPG',   summary.avg_ppg)
    ] %}
    <div class="bg-[#9E1B32] text-white p-6 rounded-lg shadow-lg">
      <div class="text-sm font-semibold uppercase opacity-90">{{ label }}</div>
      <div class="mt-2 text-3xl font-bold">{{ value }}</div>
    </div>
    {% endfor %}
  </div>
</section>


  <!-- Filters (no change) -->
  <section class="px-4 mb-6">
    <!-- your existing Season / Last 5 / True Data buttons -->
  </section>

  <!-- Leaderboards (no change) -->
  <section class="px-4 grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- your existing cards for BCP, Hard Hats, 3FG%, ATR% -->
  </section>


<!-- Filter Row -->
<div class="flex flex-wrap gap-4 mb-6">
  <a href="{{ url_for('public.homepage', filter='season',  view=view_opt) }}"
     class="px-4 py-2 rounded {{ 'bg-[#9E1B32] text-white' if filter_opt=='season'  else 'bg-gray-200 text-black' }}">
    Season
  </a>
  <a href="{{ url_for('public.homepage', filter='last5',  view=view_opt) }}"
     class="px-4 py-2 rounded {{ 'bg-[#9E1B32] text-white' if filter_opt=='last5'  else 'bg-gray-200 text-black' }}">
    Last 5 Games
  </a>
  <a href="{{ url_for('public.homepage', filter='true_data', view=view_opt) }}"
     class="px-4 py-2 rounded {{ 'bg-[#9E1B32] text-white' if filter_opt=='true_data' else 'bg-gray-200 text-black' }}">
    True Data
  </a>
</div>

<!-- 2x2 Grid Layout: 4 Equal Leaderboard Boxes -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">

<!-- Blue Collar Points Leaders -->
<div class="bg-white shadow rounded-lg p-6 overflow-x-auto">
  <h2 class="text-xl font-semibold mb-4">Blue Collar Points Leaders</h2>
  <table class="min-w-full whitespace-no-wrap">
    <thead class="bg-gray-100 border-b-4 border-[#9E1B32]">
      <tr>
        <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700 uppercase">
          Player
        </th>
        <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700 uppercase">
          <a href="{{ url_for('public.homepage', sort='bcp', filter=filter_opt) }}"
             class="{{ 'text-white bg-[#9E1B32]' if request.args.get('sort','bcp')=='bcp' else 'text-gray-700 hover:underline' }} inline-block px-2 py-1 rounded">
            Total BCP
          </a>
        </th>
        <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700 uppercase">
          Possessions
        </th>
        <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700 uppercase">
          <a href="{{ url_for('public.homepage', sort='efficiency', filter=filter_opt) }}"
             class="{{ 'text-white bg-[#9E1B32]' if request.args.get('sort')=='efficiency' else 'text-gray-700 hover:underline' }} inline-block px-2 py-1 rounded">
            Poss / BCP
          </a>
        </th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-200">
      {% for player, total_bcp, possessions, poss_per_bcp in bcp_leaders %}
      <tr class="bg-white hover:bg-gray-50">
        <td class="px-6 py-4 text-sm text-gray-800">
          {% if current_user.is_authenticated and (current_user.is_admin or not current_user.is_player) %}
            <a href="{{ url_for('admin.player_detail', player_name=player) }}" class="text-blue-600 hover:underline">{{ player }}</a>
          {% else %}
            {{ player }}
          {% endif %}
        </td>
        <td class="px-6 py-4 text-sm text-gray-800">{{ '%.1f'|format(total_bcp) }}</td>
        <td class="px-6 py-4 text-sm text-gray-800">{{ possessions }}</td>
        <td class="px-6 py-4 text-sm text-gray-800">
          {% if poss_per_bcp is not none %}
            {{ '%.2f'|format(poss_per_bcp) }}
          {% else %}
            —
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

  

  <!-- Hard Hat Winners -->
  <div class="bg-white shadow rounded-lg p-6 overflow-x-auto">
    <h2 class="text-xl font-semibold mb-4">Hard Hats</h2>
    <table class="min-w-full whitespace-no-wrap">
      <thead class="bg-gray-100 border-b-4 border-[#9E1B32]">
        <tr>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700 uppercase">Player</th>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700 uppercase">Hard Hats Won</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        {% for player, count in hard_hats %}
        <tr class="bg-white hover:bg-gray-50">
          <td class="px-6 py-4 text-sm text-gray-800">
            {% if current_user.is_authenticated and (current_user.is_admin or not current_user.is_player) %}
              <a href="{{ url_for('admin.player_detail', player_name=player) }}" class="text-blue-600 hover:underline">{{ player }}</a>
            {% else %}
              {{ player }}
            {% endif %}
          </td>
          <td class="px-6 py-4 text-sm text-gray-800 font-semibold">{{ count }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- 3FG% Leaders -->
  <div class="bg-white shadow rounded-lg p-6 overflow-x-auto">
    <h2 class="text-xl font-semibold mb-4">3FG% Leaders</h2>
    <table class="min-w-full whitespace-no-wrap">
      <thead class="bg-gray-100 border-b-4 border-[#9E1B32]">
        <tr>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700 uppercase">Player</th>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700 uppercase">FG</th>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700 uppercase">FG%</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        {% for p in fg3_leaders %}
        <tr class="bg-white hover:bg-gray-50">
          <td class="px-6 py-4 text-sm text-gray-800">
            {% if current_user.is_authenticated and (current_user.is_admin or not current_user.is_player) %}
              <a href="{{ url_for('admin.player_detail', player_name=p.player_name) }}" class="text-blue-600 hover:underline">{{ p.player_name }}</a>
            {% else %}
              {{ p.player_name }}
            {% endif %}
          </td>
          <td class="px-6 py-4 text-sm text-gray-800">{{ p.fg3m }}-{{ p.fg3a }}</td>
          <td class="px-6 py-4 text-sm text-gray-800">
            {% if p.fg3_pct is not none %}
              {{ '%.1f'|format(p.fg3_pct) }}%
            {% else %}
              —
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- ATR% Leaders -->
  <div class="bg-white shadow rounded-lg p-6 overflow-x-auto">
    <h2 class="text-xl font-semibold mb-4">ATR% Leaders</h2>
    <table class="min-w-full whitespace-no-wrap">
      <thead class="bg-gray-100 border-b-4 border-[#9E1B32]">
        <tr>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700 uppercase">Player</th>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700 uppercase">FG</th>
          <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700 uppercase">FG%</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        {% for p in atr_leaders %}
        <tr class="bg-white hover:bg-gray-50">
          <td class="px-6 py-4 text-sm text-gray-800">
            {% if current_user.is_authenticated and (current_user.is_admin or not current_user.is_player) %}
              <a href="{{ url_for('admin.player_detail', player_name=p.player_name) }}" class="text-blue-600 hover:underline">{{ p.player_name }}</a>
            {% else %}
              {{ p.player_name }}
            {% endif %}
          </td>
          <td class="px-6 py-4 text-sm text-gray-800">{{ p.atrm }}-{{ p.atra }}</td>
          <td class="px-6 py-4 text-sm text-gray-800">
            {% if p.atr_pct is not none %}
              {{ '%.1f'|format(p.atr_pct) }}%
            {% else %}
              —
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>


{% endblock %}
