{% extends 'base.html' %}
{% block content %}
<h1>Recruits</h1>
<a href="{{ url_for('recruiting.add_recruit') }}" class="btn">+ Add Recruit</a>
<table class="table-auto w-full mt-4 text-left">
  <thead>
      <tr>
        <th>Name</th>
        <th>Position</th>
        <th>School</th>
        <th>247Sports</th>
        <th>ESPN</th>
        <th>Synergy ID</th>
        <th>Off Rating</th>
        <th>Def Rating</th>
        <th>MP</th>
        <th>3FG %</th>
        <th>FT %</th>
        <th>Ast</th>
        <th>TO</th>
        <th>A/T</th>
        <th>Actions</th>
      </tr>
  </thead>
    <tbody>
    {% for recruit in recruits %}
      <tr>
        <td>{{ recruit.name }}</td>
        <td>{{ recruit.position }}</td>
        <td>{{ recruit.school }}</td>
        <td>
          {% if recruit.s247_url %}
            <a href="{{ recruit.s247_url }}" target="_blank">247 Profile</a>
          {% endif %}
        </td>
        <td>
          {% if recruit.espn_url %}
            <a href="{{ recruit.espn_url }}" target="_blank">ESPN Profile</a>
          {% endif %}
        </td>
        <td>{{ recruit.synergy_player_id or '—' }}</td>
        <td>{{ recruit.off_rating or '—' }}</td>
        <td>{{ recruit.def_rating or '—' }}</td>
        <td>{{ recruit.minutes_played or '—' }}</td>
        <td>{{ recruit.three_fg_pct or '—' }}</td>
        <td>{{ recruit.ft_pct or '—' }}</td>
        <td>{{ recruit.assists or '—' }}</td>
        <td>{{ recruit.turnovers or '—' }}</td>
        <td>{{ recruit.ast_to_to_ratio or '—' }}</td>
        <td>
          <a href="{{ url_for('recruiting.update_synergy', id=recruit.id) }}" class="btn btn-sm btn-secondary">Set Synergy</a>
          <a href="{{ url_for('recruiting.edit_recruit', id=recruit.id) }}" class="btn btn-sm btn-primary">Edit</a>
          <form action="{{ url_for('recruiting.delete_recruit', id=recruit.id) }}"
                method="post" style="display:inline;">
            {{ csrf_token() }}
            <button type="submit" class="btn btn-sm btn-danger">Delete</button>
          </form>
        </td>
      </tr>
    {% else %}
      <tr>
        <td colspan="7" class="text-center">No recruits to display.</td>
      </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}
