{% extends 'admin/base.html' %}
{% block content %}
  <form method="get" class="mb-4">
    {% for lbl in all_labels %}
      <label class="inline-block mr-4">
        <input type="checkbox" name="labels" value="{{ lbl }}"
               {% if lbl in labels %}checked{% endif %}>
        {{ lbl }}
      </label>
    {% endfor %}
    <button type="submit" class="btn btn-sm btn-primary">Filter Drills</button>
  </form>

  <div class="overflow-x-auto bg-white p-6 rounded shadow">
    <h1 class="text-2xl font-bold mb-4">{{ player_name }} — Session Comparison</h1>
    <table class="min-w-full border">
      <thead class="bg-gray-100">
        <tr>
          <th class="px-4 py-2 text-left">Stat</th>
          {% for sess in sessions %}
            <th class="px-4 py-2 text-center">
              {{ sess.name }}<br>
              <span class="text-sm text-gray-600">
                {{ sess.start_date.strftime('%b %-d') }}–{{ sess.end_date.strftime('%b %-d') }}
              </span>
            </th>
          {% endfor %}
          <th class="px-4 py-2 text-center">Overall</th>
        </tr>
      </thead>
      <tbody>
        {% for stat in display_stats %}
          <tr class="{{ loop.cycle('bg-white','bg-gray-50') }}">
            <td class="px-4 py-2">{{ stat.label }}</td>
            {% for val in stat.session_values %}
              <td class="px-4 py-2 text-center
                  {% if loop.index0 == 1 %}
                    {% if stat.improved %}text-green-600{% else %}text-red-600{% endif %}
                  {% endif %}">
                {{ val }}
              </td>
            {% endfor %}
            <td class="px-4 py-2 text-center">{{ stat.overall_value }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
