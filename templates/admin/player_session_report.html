{% extends 'admin/base.html' %}
{% block content %}
<div class="p-6 bg-white rounded shadow">
  <h1 class="text-2xl font-bold mb-4">{{ player_name }} — Session Comparison</h1>

  <div class="overflow-x-auto">
    <table class="min-w-full border">
      <thead class="bg-gray-100">
        <tr>
          <th class="px-4 py-2 text-left">Stat</th>
          {% for sess in sessions %}
            <th class="px-4 py-2 text-center">
              {{ sess.name }}<br>
              <span class="text-sm text-gray-600">
                {{ sess.start_date.strftime('%b %-d') }}–{{ sess.end_date.strftime('%b %-d') }}
              </span>
            </th>
          {% endfor %}
          <th class="px-4 py-2 text-center">Overall</th>
        </tr>
      </thead>
      <tbody>
        {% set metrics = [
          ('points', 'Points'),
          ('rebounds', 'Rebounds'),
          ('assists', 'Assists'),
          ('fg_attempts', 'FG Attempts'),
          ('fg_made', 'FG Made'),
          ('efg_pct', 'eFG%'),
          ('points_per_shot', 'PPP')
        ] %}
        {% for key, label in metrics %}
          <tr class="{% cycle 'bg-white' 'bg-gray-50' %}">
            <td class="px-4 py-2">{{ label }}</td>
            {% for sess in sessions %}
              <td class="px-4 py-2 text-center">
                {{ sess.stats[key] if sess.stats[key] is not none else 0 }}
              </td>
            {% endfor %}
            <td class="px-4 py-2 text-center">
              {{ overall[key] if overall[key] is not none else 0 }}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
