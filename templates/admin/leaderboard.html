{% extends 'admin/base.html' %}

{% block page_controls %}
<form method="get" class="mb-4 flex flex-wrap items-end gap-4">
  <div>
    <label class="font-semibold mr-2">Season:</label>
    <select name="season_id" class="border p-2 rounded">
      {% for s in all_seasons %}
        <option value="{{ s.id }}" {% if s.id == selected_season %}selected{% endif %}>
          {{ s.season_name }}
        </option>
      {% endfor %}
    </select>
  </div>
  {% for key, values in request.args.lists() %}
    {% if key not in ['season_id', 'stat'] %}
      {% for v in values %}
        <input type="hidden" name="{{ key }}" value="{{ v }}">
      {% endfor %}
    {% endif %}
  {% endfor %}
  <input type="hidden" name="stat" value="{{ selected.key }}">
  <div>
    <button type="submit" class="bg-[#9E1B32] hover:bg-[#7f1524] text-white px-5 py-2 rounded">Apply</button>
  </div>
  <div>
    <a href="{{ url_for('admin.leaderboard') }}" class="text-gray-600 hover:underline text-sm">Clear</a>
  </div>
</form>
{% include "_filters_session.html" %}
{% endblock %}

{% block content %}
  {% set practice_links = [
    ('Defense – Bumps', 'admin.leaderboard_defense_bumps'),
    ('Offensive Rebounding', 'admin.leaderboard_reb_offense'),
    ('Defensive Rebounding', 'admin.leaderboard_reb_defense'),
    ('Collisions – Gap Help', 'admin.leaderboard_collisions_gap_help'),
    ('Gap Help (Overall)', 'admin.leaderboard_overall_gap_help'),
    ('Low Man (Overall)', 'admin.leaderboard_overall_low_man'),
    ('PnR Gap Help', 'admin.leaderboard_pnr_gap_help'),
    ('PnR Grade', 'admin.leaderboard_pnr_grade'),
  ] %}
  <section class="mb-6">
    <h2 class="text-lg font-semibold text-gray-900">Practice Leaderboards</h2>
    <div class="mt-3 flex flex-wrap gap-3 text-sm">
      {% for label, endpoint in practice_links %}
        {% set is_active = request.endpoint == endpoint %}
        <a
          class="px-3 py-1 rounded-full border transition {{ 'bg-[#9E1B32] text-white border-[#9E1B32]' if is_active else 'border-gray-300 text-gray-700 hover:bg-white hover:text-[#9E1B32]' }}"
          href="{{ url_for(endpoint) }}"
        >
          {{ label }}
        </a>
      {% endfor %}
    </div>
  </section>
  {% include "_leaderboard_block.html" %}
{% endblock %}
