{% extends 'base.html' %}
{% block content %}
<div class="w-full p-4 sm:p-6 bg-white dark:bg-gray-800 rounded-xl shadow">
  <div class="flex items-center justify-between mb-4">
    <h1 class="text-2xl sm:text-3xl font-bold">Compare Coaches</h1>
    <a class="text-blue-600 hover:underline" href="{{ url_for('recruits.money_board') }}">← Back to Money Board</a>
  </div>

  <form method="get" class="mb-4 flex flex-col sm:flex-row gap-3 items-start">
    <div class="flex-1">
      <label class="block text-sm mb-1">Select up to 5 coaches</label>
      <select name="coaches" multiple size="8" class="w-full border rounded p-2">
        {% for c in coaches %}
          <option value="{{ c }}" {% if c in selected %}selected{% endif %}>{{ c }}</option>
        {% endfor %}
      </select>
      <p class="text-xs text-gray-500 mt-1">Hold Cmd/Ctrl to select multiple.</p>
    </div>
    <div class="sm:self-end">
      <button class="px-4 py-2 rounded bg-gray-900 text-white dark:bg-gray-200 dark:text-black">Compare</button>
    </div>
  </form>

  {% if comps %}
  <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
    {% for c in comps %}
      <div class="p-4 rounded-xl border bg-gray-50 dark:bg-gray-900">
        <div class="text-sm text-gray-500">Coach</div>
        <div class="text-lg font-semibold">{{ c.coach }}</div>
        <div class="mt-2 grid grid-cols-2 gap-2 text-sm">
          <div>Recruits</div><div class="text-right font-medium">{{ c.recruits }}</div>
          <div>Projected</div><div class="text-right">{{ c.proj_sum|fmt_money }}</div>
          <div>Actual</div><div class="text-right">{{ c.act_sum|fmt_money }}</div>
          <div>NET</div><div class="text-right font-semibold {{ c.net_sum|posneg }}">{{ c.net_sum|fmt_money }}</div>
          <div>Avg NET</div><div class="text-right">{{ c.avg_net|fmt_money }}</div>
        </div>
        <div class="mt-3">
          <a class="text-blue-600 hover:underline" href="{{ url_for('recruits.money_coach', coach_name=c.coach) }}">View details →</a>
        </div>
      </div>
    {% endfor %}
  </div>
  {% else %}
    <div class="text-sm text-gray-500">Select coaches and click Compare.</div>
  {% endif %}
</div>
{% endblock %}
