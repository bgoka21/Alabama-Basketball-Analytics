{% macro render_dual_section(title, season_rows, season_totals, last_rows, last_totals, columns, note_date=None) %}
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
  <div class="rounded-xl border p-4 bg-white/50 dark:bg-neutral-900/40">
    <div class="flex items-baseline justify-between mb-2">
      <h3 class="text-lg font-semibold">{{ title }} — Practice Totals</h3>
    </div>
    <div class="overflow-x-auto">
      <table class="w-full text-sm">
        <thead>
          <tr>
            <th class="text-left pr-2">#</th>
            <th class="text-left pr-2">Player</th>
            {% for col in columns %}
              <th class="text-right pl-2">{{ col }}</th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
          {% for r in season_rows or [] %}
          <tr class="border-t">
            <td class="pr-2">{{ r.jersey or r.get('jersey') }}</td>
            <td class="pr-2">{{ r.player or r.get('player') }}</td>
            {% for col in columns %}
              <td class="text-right pl-2">{{ r[col] }}</td>
            {% endfor %}
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  <div class="rounded-xl border p-4 bg-white/50 dark:bg-neutral-900/40">
    <div class="flex items-baseline justify-between mb-2">
      <h3 class="text-lg font-semibold">{{ title }} — Last Practice</h3>
      {% if note_date %}<span class="text-xs opacity-70">({{ note_date }})</span>{% endif %}
    </div>
    {% if last_rows and last_rows|length %}
    <div class="overflow-x-auto">
      <table class="w-full text-sm">
        <thead>
          <tr>
            <th class="text-left pr-2">#</th>
            <th class="text-left pr-2">Player</th>
            {% for col in columns %}
              <th class="text-right pl-2">{{ col }}</th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
          {% for r in last_rows %}
          <tr class="border-t">
            <td class="pr-2">{{ r.jersey or r.get('jersey') }}</td>
            <td class="pr-2">{{ r.player or r.get('player') }}</td>
            {% for col in columns %}
              <td class="text-right pl-2">{{ r[col] }}</td>
            {% endfor %}
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
      <div class="text-sm opacity-70">No stats for the most recent practice.</div>
    {% endif %}
  </div>
</div>
{% endmacro %}

{# 
  Renders a two-row table header that groups stat columns into
  “Totals” and “Last Practice” with matching stat labels.
  Use with .table-leaderboard + the CSS widths we added.
#}
{% macro render_grouped_last_practice_header(base_stat_labels, left_title='Totals', right_title='Last Practice') %}
  <thead>
    <tr>
      <th class="th-num px-4 py-2" rowspan="2">#</th>
      <th class="th-player px-4 py-2" rowspan="2">Player</th>
      <th class="th-group px-4 py-2" colspan="{{ base_stat_labels|length }}">{{ left_title }}</th>
      <th class="th-group px-4 py-2" colspan="{{ base_stat_labels|length }}">{{ right_title }}</th>
    </tr>
    <tr>
      {# left group column labels #}
      {% for label in base_stat_labels %}
        <th class="th-stat px-4 py-2">{{ label }}</th>
      {% endfor %}
      {# right group (Last Practice) uses the SAME labels — no “(Last Practice)” suffix #}
      {% for label in base_stat_labels %}
        <th class="th-stat px-4 py-2">{{ label }}</th>
      {% endfor %}
    </tr>
  </thead>
{% endmacro %}

{% macro td_stat(value) -%}
  <td class="td-stat px-4 py-2 text-center">
    {{ value }}
  </td>
{%- endmacro %}
