{% from 'macros/table.html' import render_table %}

{% macro render_dual_section(title, table_data, note_date=None, empty_message='No stats for the most recent practice.') %}
  {% set table = table_data or {} %}
  {% set columns = table.columns or [] %}
  {% set rows = table.rows or [] %}
  {% set totals = table.totals if table.totals is defined else None %}
  {% set default_sort = table.default_sort if table.default_sort is defined else None %}
  {% set explicit_id = table.id if table.id is defined else None %}
  {% set table_id = explicit_id or title|lower|replace(' ', '-')|replace('—', '-')|replace('–', '-')|replace("'", '') %}
  {% set has_content = rows|length or totals %}
  <section class="space-y-3">
    <div class="flex items-baseline justify-between">
      <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">{{ title }}</h3>
      {% if note_date %}<span class="text-xs opacity-70">({{ note_date }})</span>{% endif %}
    </div>
    <span class="sr-only">{{ title }} — Practice Totals</span>
    <span class="sr-only">{{ title }} — Last Practice</span>
    {% if has_content %}
      {{ render_table(
        id=table_id,
        columns=columns,
        rows=rows,
        totals=totals,
        dense=True,
        sticky_header=True,
        caption=title,
        default_sort=default_sort
      ) }}
    {% else %}
      <div class="text-sm opacity-70">{{ empty_message }}</div>
    {% endif %}
  </section>
{% endmacro %}
