{% from 'macros/dual_tables.html' import render_dual_section %}
{% from 'macros/table.html' import render_table %}
{% from '_macros/percent_box.html' import apply_percent_wrappers %}
{% from '_macros/grade_scale.html' import render_grade_scales_for_specs %}

<h1 class="text-3xl font-bold mb-6">Season Leaderboard</h1>

<form method="get" class="mb-4">
  <label for="stat-select">Stat:</label>
  <select id="stat-select" name="stat" onchange="this.form.submit()">
    {% for s in stats_config if not s.get('hidden') %}
      <option value="{{ s.key }}" {% if s.key == selected.key %}selected{% endif %}>{{ s.label }}</option>
    {% endfor %}
  </select>
  <input type="hidden" name="season_id" value="{{ selected_season }}">
  <input type="hidden" name="start_date" value="{{ start_date }}">
  <input type="hidden" name="end_date" value="{{ end_date }}">
  <input type="hidden" name="session" value="{{ selected_session }}">
  {% for lbl in selected_labels %}
    <input type="hidden" name="label" value="{{ lbl }}">
  {% endfor %}
</form>

{% set practice_note = last_practice_date.strftime('%b %d, %Y') if last_practice_date else None %}

{% if selected.key == 'defense' %}
  {% set columns = ["Bump +", "Bump Opps", "Bump %"] %}
  {% set column_map = {
    "Bump +": ("plus", "bump_positive"),
    "Bump Opps": ("opps", "total_opps"),
    "Bump %": ("pct",),
  } %}
  {% set pct_columns = ["Bump %"] %}
  {% set table = build_dual_table(
    base_columns=columns,
    season_rows=bump_rows,
    last_rows=bump_last_rows,
    season_totals=bump_totals,
    last_totals=bump_last_totals,
    column_map=column_map,
    pct_columns=pct_columns,
    left_label='Season Totals',
    right_label='Last Practice',
    totals_label='Team Totals',
    table_id='leaderboard-defense',
    default_sort=['pct', 'opps', 'plus']
  ) %}
  {% set percent_specs = [
    {
      'slug': 'bump_pct',
      'metric': 'bump_pct',
      'attempt_slugs': ['bump_opps', 'bump_opp'],
      'minimum_slugs': [
        'bump_min', 'bump_min_opps', 'bump_min_opp',
        'bump_opps_min', 'bump_opp_min', 'min_bump_opps', 'min_bump_opp'
      ]
    }
  ] %}
  {{ apply_percent_wrappers(table, percent_specs) }}
  {{ render_dual_section('Defense — Bumps', table, practice_note) }}
  {{ render_grade_scales_for_specs(percent_specs) }}

{% elif selected.key == 'off_rebounding' %}
  <div class="space-y-8">
    {% set crash_columns = ["Crash +", "Crash Att", "Crash %"] %}
    {% set crash_map = {
      "Crash +": ("plus", "crash_plus"),
      "Crash Att": ("opps", "crash_opp", "crash_opps"),
      "Crash %": ("pct", "crash_pct"),
    } %}
    {% set crash_table = build_dual_table(
      base_columns=crash_columns,
      season_rows=crash_rows,
      last_rows=crash_last_rows,
      season_totals=crash_totals,
      last_totals=crash_last_totals,
      column_map=crash_map,
      pct_columns=['Crash %'],
      left_label='Season Totals',
      right_label='Last Practice',
      totals_label='Team Totals',
      table_id='leaderboard-offense-crash',
      default_sort=['pct', 'opps', 'plus']
    ) %}
    {% set crash_percent_specs = [
      {
        'slug': 'crash_pct',
        'metric': 'crash_pct',
        'attempt_slugs': ['crash_att', 'crash_opp', 'crash_opps'],
        'minimum_slugs': [
          'crash_min', 'crash_min_att', 'crash_min_attempts',
          'crash_att_min', 'min_crash_att', 'crash_opp_min', 'min_crash_opp'
        ]
      }
    ] %}
    {{ apply_percent_wrappers(crash_table, crash_percent_specs) }}
    {{ render_dual_section('Offensive Crash', crash_table, practice_note) }}
    {{ render_grade_scales_for_specs(crash_percent_specs) }}

    {% set back_columns = ["Back Man +", "Back Man Att", "Back Man %"] %}
    {% set back_map = {
      "Back Man +": ("plus", "back_plus"),
      "Back Man Att": ("opps", "back_opp", "back_opps"),
      "Back Man %": ("pct", "back_pct"),
    } %}
    {% set back_table = build_dual_table(
      base_columns=back_columns,
      season_rows=backman_rows,
      last_rows=backman_last_rows,
      season_totals=backman_totals,
      last_totals=backman_last_totals,
      column_map=back_map,
      pct_columns=['Back Man %'],
      left_label='Season Totals',
      right_label='Last Practice',
      totals_label='Team Totals',
      table_id='leaderboard-offense-back',
      default_sort=['pct', 'opps', 'plus']
    ) %}
    {% set back_percent_specs = [
      {
        'slug': 'back_man_pct',
        'metric': 'back_man_pct',
        'attempt_slugs': ['back_man_att', 'back_man_opp', 'back_man_opps'],
        'minimum_slugs': [
          'back_man_min', 'back_man_min_att', 'back_man_min_attempts',
          'back_man_att_min', 'min_back_man_att', 'back_man_opp_min', 'min_back_man_opp'
        ]
      }
    ] %}
    {{ apply_percent_wrappers(back_table, back_percent_specs) }}
    {{ render_dual_section('Offensive Back Man', back_table, practice_note) }}
    {{ render_grade_scales_for_specs(back_percent_specs) }}
  </div>

{% elif selected.key == 'def_rebounding' %}
  {% set columns = ["Box Out +", "Box Out Att", "Box Out %", "Off Reb's Given Up"] %}
  {% set column_map = {
    "Box Out +": ("plus", "box_plus"),
    "Box Out Att": ("opps", "box_opp", "box_opps"),
    "Box Out %": ("pct", "box_pct"),
    "Off Reb's Given Up": ("off_reb_given_up", "given_up"),
  } %}
  {% set pct_columns = ["Box Out %"] %}
  {% set table = build_dual_table(
    base_columns=columns,
    season_rows=box_rows,
    last_rows=box_last_rows,
    season_totals=box_totals,
    last_totals=box_last_totals,
    column_map=column_map,
    pct_columns=pct_columns,
    left_label='Season Totals',
    right_label='Last Practice',
    totals_label='Team Totals',
    table_id='leaderboard-def-reb',
    default_sort=['pct', 'opps', 'plus']
  ) %}
  {% set percent_specs = [
    {
      'slug': 'box_out_pct',
      'metric': 'box_out_pct',
      'attempt_slugs': ['box_out_att', 'box_out_opp', 'box_out_opps'],
      'minimum_slugs': [
        'box_out_min', 'box_out_min_att', 'box_out_min_attempts',
        'box_out_att_min', 'min_box_out_att', 'box_out_opp_min', 'min_box_out_opp'
      ]
    }
  ] %}
  {{ apply_percent_wrappers(table, percent_specs) }}
  {{ render_dual_section('Defensive Rebounding', table, practice_note) }}
  {{ render_grade_scales_for_specs(percent_specs) }}

{% elif selected.key == 'collision_gap_help' %}
  {% set columns = ["Collision +", "Collision Opp", "Collision %"] %}
  {% set column_map = {
    "Collision +": ("plus", "gap_plus"),
    "Collision Opp": ("opps", "gap_opp", "gap_opps"),
    "Collision %": ("pct", "gap_pct"),
  } %}
  {% set pct_columns = ["Collision %"] %}
  {% set table = build_dual_table(
    base_columns=columns,
    season_rows=collision_rows,
    last_rows=collision_last_rows,
    season_totals=collision_totals,
    last_totals=collision_last_totals,
    column_map=column_map,
    pct_columns=pct_columns,
    left_label='Season Totals',
    right_label='Last Practice',
    totals_label='Team Totals',
    table_id='leaderboard-collision-gap',
    default_sort=['pct', 'opps', 'plus']
  ) %}
  {% set percent_specs = [
    {
      'slug': 'gap_pct',
      'metric': 'gap_pct',
      'attempt_slugs': ['gap_opp', 'gap_opps'],
      'minimum_slugs': [
        'gap_min', 'gap_min_opp', 'gap_min_opps',
        'gap_opp_min', 'gap_opps_min', 'min_gap_opp', 'min_gap_opps'
      ]
    }
  ] %}
  {{ apply_percent_wrappers(table, percent_specs) }}
  {{ render_dual_section('Collisions — Gap Help', table, practice_note) }}
  {{ render_grade_scales_for_specs(percent_specs) }}

{% elif selected.key == 'pass_contest' %}
  {% set columns = ["Contest +", "Contest Att", "Contest %"] %}
  {% set column_map = {
    "Contest +": ("plus", "contest_plus", "pass_contest_plus"),
    "Contest Att": ("opps", "contest_opp", "contest_opps", "pass_contest_opp", "pass_contest_opps"),
    "Contest %": ("pct", "contest_pct", "pass_contest_pct"),
  } %}
  {% set pct_columns = ["Contest %"] %}
  {% set table = build_dual_table(
    base_columns=columns,
    season_rows=pass_contest_rows,
    last_rows=pass_contest_last_rows,
    season_totals=pass_contest_totals,
    last_totals=pass_contest_last_totals,
    column_map=column_map,
    pct_columns=pct_columns,
    left_label='Season Totals',
    right_label='Last Practice',
    totals_label='Team Totals',
    table_id='leaderboard-pass-contest',
    default_sort=['pct', 'opps', 'plus']
  ) %}
  {% set percent_specs = [
    {
      'slug': 'contest_pct',
      'metric': 'contest_pct',
      'attempt_slugs': ['contest_att', 'contest_opp', 'contest_opps'],
      'minimum_slugs': [
        'contest_min', 'contest_min_att', 'contest_min_attempts',
        'contest_att_min', 'min_contest_att', 'contest_opp_min', 'min_contest_opp'
      ]
    }
  ] %}
  {{ apply_percent_wrappers(table, percent_specs) }}
  {{ render_dual_section('Pass Contests', table, practice_note) }}
  {{ render_grade_scales_for_specs(percent_specs) }}

{% elif selected.key == 'atr_fg_pct' %}
  {% set columns = ["FG", "FG%", "Freq"] %}
  {% set column_map = {
    "FG": {
      "keys": ("fg_summary", "makes"),
      "numeric_keys": ("makes", "attempts"),
    },
    "FG%": {
      "keys": ("fg_pct", "atr_fg_pct", "pct"),
      "format": 'pct',
    },
    "Freq": {
      "keys": ("freq", "atr_freq_pct", "freq_pct"),
      "format": 'pct',
    }
  } %}
  {% set pct_columns = ["FG%", "Freq"] %}
  {% set grade_metrics = {
    'fg_pct': 'atr2fg_pct',
    'freq': 'atr_freq_pct'
  } %}
  {% set table = build_dual_table(
    base_columns=columns,
    season_rows=atr_fg_rows,
    last_rows=atr_fg_last_rows,
    season_totals=atr_fg_totals,
    last_totals=atr_fg_last_totals,
    column_map=column_map,
    pct_columns=pct_columns,
    left_label='Season Totals',
    right_label='Last Practice',
    totals_label='Team Totals',
    table_id='leaderboard-atr_fg_pct',
    default_sort=['fg_pct', 'freq', 'makes'],
    grade_metrics=grade_metrics,
  ) %}
  {% set percent_specs = [
    {
      'slug': 'fg_pct',
      'metric': 'atr2fg_pct',
      'attempt_slugs': ['attempts', 'atr_attempts', 'fg_m_a'],
    }
  ] %}
  {{ apply_percent_wrappers(table, percent_specs) }}
  {{ render_dual_section('ATR FG%', table, practice_note) }}
  {{ render_grade_scales_for_specs(percent_specs) }}

{% elif selected.key in ['atr_contest_breakdown', 'fg2_contest_breakdown', 'fg3_contest_breakdown'] %}
  {% set label_map = {
    'atr_contest_breakdown': 'ATR',
    'fg2_contest_breakdown': '2FG',
    'fg3_contest_breakdown': '3FG',
  } %}
  {% set shot_label = label_map.get(selected.key, 'Shot') %}
  {% set columns = [
    'Contest Att', 'Contest Makes', 'Contest FG%',
    'Late Att', 'Late Makes', 'Late FG%',
    'No Contest Att', 'No Contest Makes', 'No Contest FG%'
  ] %}
  {% set column_map = {
    'Contest Att': ('opps', 'contest_attempts'),
    'Contest Makes': ('plus', 'contest_makes'),
    'Contest FG%': ('pct', 'contest_pct'),
    'Late Att': ('opps', 'late_attempts'),
    'Late Makes': ('plus', 'late_makes'),
    'Late FG%': ('pct', 'late_pct'),
    'No Contest Att': ('opps', 'no_contest_attempts'),
    'No Contest Makes': ('plus', 'no_contest_makes'),
    'No Contest FG%': ('pct', 'no_contest_pct'),
  } %}
  {% set pct_columns = ['Contest FG%', 'Late FG%', 'No Contest FG%'] %}
  {% set table = build_dual_table(
    base_columns=columns,
    season_rows=shot_contest_rows,
    last_rows=shot_contest_last_rows,
    season_totals=shot_contest_totals,
    last_totals=shot_contest_last_totals,
    column_map=column_map,
    pct_columns=pct_columns,
    left_label='Season Totals',
    right_label='Last Practice',
    totals_label='Team Totals',
    table_id='leaderboard-shot-contest-' ~ selected.key.split('_')[0],
  ) %}
  {% set percent_specs = [
    {
      'slug': 'contest_fg_pct',
      'metric': 'contest_pct',
      'attempt_slugs': ['contest_att', 'contest_attempts', 'contest_opp', 'contest_opps'],
      'minimum_slugs': [
        'contest_min', 'contest_min_att', 'contest_min_attempts',
        'contest_att_min', 'min_contest_att', 'contest_opp_min', 'min_contest_opp'
      ]
    },
    {
      'slug': 'late_fg_pct',
      'metric': 'late_pct',
      'attempt_slugs': ['late_att', 'late_attempts', 'late_opp', 'late_opps'],
      'minimum_slugs': [
        'late_min', 'late_min_att', 'late_min_attempts',
        'late_att_min', 'min_late_att', 'late_opp_min', 'min_late_opp'
      ]
    },
    {
      'slug': 'no_contest_fg_pct',
      'metric': 'no_contest_pct',
      'attempt_slugs': ['no_contest_att', 'no_contest_attempts', 'no_contest_opp', 'no_contest_opps'],
      'minimum_slugs': [
        'no_contest_min', 'no_contest_min_att', 'no_contest_min_attempts',
        'no_contest_att_min', 'min_no_contest_att', 'no_contest_opp_min', 'min_no_contest_opp'
      ]
    }
  ] %}
  {{ apply_percent_wrappers(table, percent_specs) }}
  {{ render_dual_section(shot_label ~ ' Shot Contests', table, practice_note) }}
  {{ render_grade_scales_for_specs(percent_specs) }}

  {% if selected.key == 'fg3_contest_breakdown' and shot_contest_rows is defined %}
    {% include 'admin/_fg3_contest_summary.html' %}
  {% endif %}

{% elif selected.key == 'overall_gap_help' %}
  {% set columns = ["Gap +", "Gap Opp", "Gap %"] %}
  {% set column_map = {
    "Gap +": ("plus", "gap_plus"),
    "Gap Opp": ("opps", "gap_opp", "gap_opps"),
    "Gap %": ("pct", "gap_pct"),
  } %}
  {% set pct_columns = ["Gap %"] %}
  {% set table = build_dual_table(
    base_columns=columns,
    season_rows=overall_gap_rows,
    last_rows=overall_gap_last_rows,
    season_totals=overall_gap_totals,
    last_totals=overall_gap_last_totals,
    column_map=column_map,
    pct_columns=pct_columns,
    left_label='Season Totals',
    right_label='Last Practice',
    totals_label='Team Totals',
    table_id='leaderboard-overall-gap',
    default_sort=['pct', 'opps', 'plus']
  ) %}
  {% set percent_specs = [
    {
      'slug': 'gap_pct',
      'metric': 'gap_pct',
      'attempt_slugs': ['gap_opp', 'gap_opps'],
      'minimum_slugs': [
        'gap_min', 'gap_min_opp', 'gap_min_opps',
        'gap_opp_min', 'gap_opps_min', 'min_gap_opp', 'min_gap_opps'
      ]
    }
  ] %}
  {{ apply_percent_wrappers(table, percent_specs) }}
  {{ render_dual_section('Overall Gap Help', table, practice_note) }}
  {{ render_grade_scales_for_specs(percent_specs) }}

{% elif selected.key == 'overall_low_man' %}
  {% set columns = ["Low +", "Low Opp", "Low %"] %}
  {% set column_map = {
    "Low +": ("plus", "low_plus"),
    "Low Opp": ("opps", "low_opp", "low_opps"),
    "Low %": ("pct", "low_pct"),
  } %}
  {% set pct_columns = ["Low %"] %}
  {% set table = build_dual_table(
    base_columns=columns,
    season_rows=overall_low_rows,
    last_rows=overall_low_last_rows,
    season_totals=overall_low_totals,
    last_totals=overall_low_last_totals,
    column_map=column_map,
    pct_columns=pct_columns,
    left_label='Season Totals',
    right_label='Last Practice',
    totals_label='Team Totals',
    table_id='leaderboard-overall-low',
    default_sort=['pct', 'opps', 'plus']
  ) %}
  {% set percent_specs = [
    {
      'slug': 'low_pct',
      'metric': 'low_pct',
      'attempt_slugs': ['low_opp', 'low_opps'],
      'minimum_slugs': [
        'low_min', 'low_min_opp', 'low_min_opps',
        'low_opp_min', 'low_opps_min', 'min_low_opp', 'min_low_opps'
      ]
    }
  ] %}
  {{ apply_percent_wrappers(table, percent_specs) }}
  {{ render_dual_section('Overall Low Man', table, practice_note) }}
  {{ render_grade_scales_for_specs(percent_specs) }}

{% elif selected.key == 'pnr_gap_help' %}
  <div class="space-y-8">
    {% set columns = ["Gap +", "Gap Opp", "Gap %"] %}
    {% set column_map = {
      "Gap +": ("plus", "gap_plus"),
      "Gap Opp": ("opps", "gap_opp", "gap_opps"),
      "Gap %": ("pct", "gap_pct"),
    } %}
    {% set pct_columns = ["Gap %"] %}
    {% set gap_table = build_dual_table(
      base_columns=columns,
      season_rows=gap_rows,
      last_rows=gap_last_rows,
      season_totals=gap_totals,
      last_totals=gap_last_totals,
      column_map=column_map,
      pct_columns=pct_columns,
      left_label='Season Totals',
      right_label='Last Practice',
      totals_label='Team Totals',
      table_id='leaderboard-pnr-gap',
      default_sort=['pct', 'opps', 'plus']
    ) %}
    {% set percent_specs = [
      {
        'slug': 'gap_pct',
        'metric': 'gap_pct',
        'attempt_slugs': ['gap_opp', 'gap_opps'],
        'minimum_slugs': [
          'gap_min', 'gap_min_opp', 'gap_min_opps',
          'gap_opp_min', 'gap_opps_min', 'min_gap_opp', 'min_gap_opps'
        ]
      }
    ] %}
    {{ apply_percent_wrappers(gap_table, percent_specs) }}
    {{ render_dual_section('PnR Gap Help', gap_table, practice_note) }}
    {{ render_grade_scales_for_specs(percent_specs) }}

    {% set low_table = build_dual_table(
      base_columns=columns,
      season_rows=low_rows,
      last_rows=low_last_rows,
      season_totals=low_totals,
      last_totals=low_last_totals,
      column_map=column_map,
      pct_columns=pct_columns,
      left_label='Season Totals',
      right_label='Last Practice',
      totals_label='Team Totals',
      table_id='leaderboard-pnr-low',
      default_sort=['pct', 'opps', 'plus']
    ) %}
    {% set percent_specs = [
      {
        'slug': 'low_pct',
        'metric': 'low_pct',
        'attempt_slugs': ['low_opp', 'low_opps'],
        'minimum_slugs': [
          'low_min', 'low_min_opp', 'low_min_opps',
          'low_opp_min', 'low_opps_min', 'min_low_opp', 'min_low_opps'
        ]
      }
    ] %}
    {{ apply_percent_wrappers(low_table, percent_specs) }}
    {{ render_dual_section('PnR Low Man', low_table, practice_note) }}
    {{ render_grade_scales_for_specs(percent_specs) }}
  </div>

{% elif selected.key == 'pnr_grade' %}
  <div class="space-y-8">
    {% set close_columns = ["Close Window +", "Close Window Opp", "Close Window %"] %}
    {% set close_map = {
      "Close Window +": ("plus", "cw_plus", "close_window_plus"),
      "Close Window Opp": ("opps", "cw_opp", "close_window_opp"),
      "Close Window %": ("pct", "cw_pct", "close_window_pct"),
    } %}
    {% set close_pct_columns = ["Close Window %"] %}
    {% set close_table = build_dual_table(
      base_columns=close_columns,
      season_rows=close_rows,
      last_rows=close_last_rows,
      season_totals=close_totals,
      last_totals=close_last_totals,
      column_map=close_map,
      pct_columns=close_pct_columns,
      left_label='Season Totals',
      right_label='Last Practice',
      totals_label='Team Totals',
      table_id='leaderboard-pnr-close-window',
      default_sort=['pct', 'opps', 'plus']
    ) %}
    {% set close_percent_specs = [
      {
        'slug': 'close_window_pct',
        'metric': 'close_window_pct',
        'attempt_slugs': ['close_window_opp', 'close_window_opps', 'cw_opp'],
        'minimum_slugs': [
          'close_window_min', 'close_window_min_opp', 'close_window_min_opps',
          'close_window_opp_min', 'close_window_opps_min',
          'min_close_window_opp', 'min_close_window_opps',
          'cw_min', 'cw_opp_min', 'min_cw_opp'
        ]
      }
    ] %}
    {{ apply_percent_wrappers(close_table, close_percent_specs) }}
    {{ render_dual_section('Close Window', close_table, practice_note) }}
    {{ render_grade_scales_for_specs(close_percent_specs) }}

    {% set shut_columns = ["Shut Door +", "Shut Door Opp", "Shut Door %"] %}
    {% set shut_map = {
      "Shut Door +": ("plus", "sd_plus", "shut_door_plus"),
      "Shut Door Opp": ("opps", "sd_opp", "shut_door_opp"),
      "Shut Door %": ("pct", "sd_pct", "shut_door_pct"),
    } %}
    {% set shut_pct_columns = ["Shut Door %"] %}
    {% set shut_table = build_dual_table(
      base_columns=shut_columns,
      season_rows=shut_rows,
      last_rows=shut_last_rows,
      season_totals=shut_totals,
      last_totals=shut_last_totals,
      column_map=shut_map,
      pct_columns=shut_pct_columns,
      left_label='Season Totals',
      right_label='Last Practice',
      totals_label='Team Totals',
      table_id='leaderboard-pnr-shut-door',
      default_sort=['pct', 'opps', 'plus']
    ) %}
    {% set shut_percent_specs = [
      {
        'slug': 'shut_door_pct',
        'metric': 'shut_door_pct',
        'attempt_slugs': ['shut_door_opp', 'shut_door_opps', 'sd_opp'],
        'minimum_slugs': [
          'shut_door_min', 'shut_door_min_opp', 'shut_door_min_opps',
          'shut_door_opp_min', 'shut_door_opps_min',
          'min_shut_door_opp', 'min_shut_door_opps',
          'sd_min', 'sd_opp_min', 'min_sd_opp'
        ]
      }
    ] %}
    {{ apply_percent_wrappers(shut_table, shut_percent_specs) }}
    {{ render_dual_section('Shut Door', shut_table, practice_note) }}
    {{ render_grade_scales_for_specs(shut_percent_specs) }}
  </div>

{% else %}
  {% set table = build_leaderboard_table(
    config=selected,
    rows=rows,
    team_totals=team_totals,
    table_id='leaderboard-' ~ selected.key if selected else None
  ) %}
  {% if table.has_data %}
    {{ render_table(
      id=table.id or 'leaderboard-table',
      columns=table.columns,
      rows=table.rows,
      totals=table.totals,
      dense=True,
      sticky_header=True,
      caption=selected.label if selected else 'Leaderboard',
      default_sort=table.default_sort
    ) }}
    {% if selected and selected.key == 'fg3_fg_pct' and shot_contest_rows is defined %}
      <div class="mt-10 space-y-6">
        <h2 class="text-2xl font-semibold text-gray-900">3FG Contest Breakdown</h2>
        {% include 'admin/_fg3_contest_summary.html' %}
      </div>
    {% endif %}
  {% else %}
    <p class="text-sm text-gray-600">Select a leaderboard to view details.</p>
  {% endif %}
{% endif %}
